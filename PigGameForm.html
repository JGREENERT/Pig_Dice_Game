<!DOCTYPE html>
<script src="PigGamePlayer.js"></script>
<script src="PigGameDice.js"></script>
<script src="PigGameEngine.js"></script>
<script src="PigGameControl.js"></script>
<script type="text/javascript">
    var flag = false;

    /*
     *   Changes the functionality and name of the set
     *   button to reset and vise versa.
     */
    function updateSetButton()
    {
        var outerForm = document.getElementById("Outer Form");
        if(flag) {
            outerForm.removeEventListener("submit", createInnerForm);
            outerForm.addEventListener("submit", resetInnerForm);
            document.getElementById("submit").value = "Reset";
        }
        else {
            outerForm.removeEventListener("submit", resetInnerForm);
            outerForm.addEventListener("submit", createInnerForm);
            document.getElementById("submit").value = "Set";
        }
    }

    /*
     *   Creates the form for user to insert player
     *   names and start the game.
     */
    var createInnerForm = function (event) {
        event.preventDefault();
        if(!flag) {
            /*Setting up Player Name HTML*/
            var playerForm = document.createElement("form");
            var numOfPlayers = document.getElementById("NOP").value;
            for (var i = 0; i < numOfPlayers; i++) {
                var playerItem = document.createElement("input");
                playerItem.setAttribute('type', "text");
                playerItem.setAttribute('name', 'Player' + i + 'Name');
                playerItem.setAttribute('value', 'Player' + i);
                playerForm.appendChild(playerItem);
            }
            /*Creating Player Name HTML and adding Play Button*/
            playerForm.appendChild(document.createElement("br"));
            var submitButton = document.createElement("input");
            submitButton.setAttribute('type', "submit");
            submitButton.setAttribute('name', "Play");
            submitButton.setAttribute('value', "Play");
            playerForm.appendChild(submitButton);
            document.getElementById("Inner Form").appendChild(playerForm);
            document.getElementById("Inner Form").addEventListener("submit", startGame);

            /*Changing set to reset event listener*/
            flag = true;
            updateSetButton();
        }
    };

    /*
     *   Resets the form if a user wants to make
     *   a different selection
     */
    var resetInnerForm = function(event)
    {
        event.preventDefault();

        /*Removing the Player Name HTML*/
        var InnerForm = document.getElementById("Inner Form").childNodes;
        document.getElementById("Inner Form").removeChild(InnerForm[0]);

        /*Changing reset to set event listener*/
        flag = false;
        updateSetButton();

    }

    /*
     *   Starts the Game by calling the Pig Game View
     *   and creating the UI by manipulating the DOM
     */
    var startGame = function(event){
        event.preventDefault();

        /*Removing "Info Form" HTML*/
        var Form = document.body.childNodes;
        document.body.removeChild(Form[1]);

        /*Adding Game UI HTML*/
        //TODO: Add the PigGameView HTML using the DOM
        //TODO: Start the Game


    }
</script>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<h3 style="font-size:xx-large; color: white; text-shadow: 2px 2px 4px #000000; text-align:center">Joe & Jesse's PigGame!</h3>
<body background="Images/Pig_Background.jpg">
<div id="Info Forms">
    <fieldset style="border-style: solid; border-width:15px; border-color: hotpink; width: 25%; margin:auto;">
        <legend style="font-size: xx-large; color: White; text-shadow: 2px 2px 4px #000000; text-align: center"><b><i>Player Form</i></b></legend>
        <div id="Outer Form">
            <form style="width: 100%">
                <code style="font-size: x-large; color: White; text-shadow: 2px 2px 4px #000000;"><b>Number of Players</b></code>
                <input type="text" name="NOP" id="NOP" value="4"><br/>
                <code style="font-size: x-large; color: White; text-shadow: 2px 2px 4px #000000;"><b>Points to Win</b></code>
                <input type="text" name="PTW" id="PTW" value="100"><br/>
                <code style="font-size: x-large; color: White; text-shadow: 2px 2px 4px #000000;"><b>Number of Dice</b></code>
                <input type="text" name="NOD" id="NOD" value="2"><br/>
                <input type="submit" name="submit" id="submit" value="Set">
            </form><br/>
        </div>
        <div id="Inner Form"></div>
    </fieldset>
</div>
<div id="Game">
</div>
</body>
</html>
<script type="text/javascript">
    document.getElementById("Outer Form").addEventListener("submit", createInnerForm);
</script>
